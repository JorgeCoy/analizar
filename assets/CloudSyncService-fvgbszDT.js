import{l as r}from"./index-BRXbbdqT.js";import"./ui-vendor-DDe9ALYy.js";import"./react-vendor-CcRn9s_c.js";class s{constructor(){this.isInitialized=!1,this.syncInterval=null,this.lastSync=null}async initialize(){if(!this.isInitialized)try{r.log("â˜ï¸ Inicializando Cloud Sync Service..."),this.isInitialized=!0,this.lastSync=new Date,r.log("â˜ï¸ Cloud Sync Service inicializado")}catch(t){throw t}}startAutoSync(){this.isInitialized&&(this.syncInterval=setInterval(async()=>{try{await this.syncUserData()}catch{}},300*1e3))}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}async syncUserData(){if(this.isInitialized)try{const t=JSON.parse(localStorage.getItem("userProfile")||"{}"),n=JSON.parse(localStorage.getItem("aleer_gamification")||"{}");r.log("â˜ï¸ Sincronizando datos del usuario...",{profile:t,gamification:n}),await new Promise(o=>setTimeout(o,1e3)),this.lastSync=new Date,localStorage.setItem("lastCloudSync",this.lastSync.toISOString()),r.log("âœ… Datos sincronizados con la nube")}catch(t){throw t}}getSyncStatus(){return{isInitialized:this.isInitialized,lastSync:this.lastSync,isAutoSyncActive:this.syncInterval!==null,timeSinceLastSync:this.lastSync?Date.now()-this.lastSync.getTime():null}}async createBackup(){try{const t={timestamp:new Date().toISOString(),userProfile:localStorage.getItem("userProfile"),gamification:localStorage.getItem("aleer_gamification"),history:localStorage.getItem("readingHistory"),version:"1.0.0"};return r.log("ðŸ’¾ Backup creado:",t),t}catch(t){throw t}}async restoreBackup(t){try{t.userProfile&&localStorage.setItem("userProfile",t.userProfile),t.gamification&&localStorage.setItem("aleer_gamification",t.gamification),t.history&&localStorage.setItem("readingHistory",t.history),r.log("ðŸ”„ Backup restaurado"),window.location.reload()}catch(n){throw n}}}let i=null;const a={getInstance:()=>(i||(i=new s),i),startAutoSync:()=>{const e=a.getInstance();e.initialize().then(()=>{e.startAutoSync()})},stopAutoSync:()=>{i&&i.stopAutoSync()},syncNow:()=>{const e=a.getInstance();return e.initialize().then(()=>e.syncUserData())},getStatus:()=>a.getInstance().getSyncStatus()};export{a as cloudSyncAPI,a as default};
